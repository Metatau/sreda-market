# SredaMarket - AI-платформа для инвестиций в недвижимость

![SredaMarket Platform](https://img.shields.io/badge/SredaMarket-Real%20Estate%20Analytics-blue)
![Version](https://img.shields.io/badge/version-2.0.0-green)
![License](https://img.shields.io/badge/license-MIT-blue)

Передовая AI-платформа для инвестиций в недвижимость, специализирующаяся на российском рынке недвижимости. Предоставляет интеллектуальную аналитику рынка через современные геопространственные технологии и интерактивную визуализацию данных.

## Ключевые возможности

### Аналитика и поиск
- **Умный поиск недвижимости**: Продвинутая фильтрация по региону, классу недвижимости, типу рынка и ценовому диапазону
- **AI-аналитика**: Интеграция с OpenAI для интеллектуального анализа рынка
- **Инвестиционные метрики**: Комплексные расчеты ROI, анализ ликвидности и инвестиционной привлекательности
- **Прогнозирование**: Машинное обучение для предсказания трендов рынка

### Геопространственная визуализация
- **Интерактивные карты**: На базе Mapbox GL и Leaflet.js для продвинутой геовизуализации
- **Тепловые карты**: Наложения для анализа цен, плотности объектов и инвестиционной привлекательности
- **Кластеризация маркеров**: Оптимизированная производительность для больших массивов данных
- **PostGIS интеграция**: Профессиональные геопространственные запросы

### Управление пользователями
- **Безопасная аутентификация**: Полная система аутентификации с профилями пользователей
- **Избранное**: Сохранение и отслеживание интересных объектов
- **Персонализация**: Индивидуальные настройки и предпочтения
- **AI-консультант**: Персональный помощник на базе GPT-4

### Данные в реальном времени
- **Синхронизация API**: Автоматическое обновление данных из внешних источников
- **Мониторинг качества**: Система контроля целостности данных
- **Кэширование**: Оптимизированная производительность загрузки

## Технологический стек

### Frontend
- **React 18** с TypeScript для типобезопасности
- **Tailwind CSS** + **Shadcn/ui** для современного дизайна
- **TanStack Query v5** для управления состоянием сервера
- **Wouter** для клиентского роутинга
- **Framer Motion** для анимаций

### Backend
- **Express.js** с TypeScript
- **PostgreSQL 15** + **PostGIS** для геопространственных данных
- **Drizzle ORM** для типобезопасных запросов к БД
- **Passport.js** для аутентификации
- **WebSocket** для real-time обновлений

### Геопространственные технологии
- **PostGIS** для геопространственных запросов
- **Mapbox GL JS** для интерактивных карт
- **Leaflet.js** как альтернативный картографический движок

### AI и внешние сервисы
- **OpenAI GPT-4** для AI-консультанта
- **ADS API** для данных недвижимости
- **Stripe** для обработки платежей
- **Yandex Metrika** для аналитики

## Быстрый старт

### Предварительные требования
- Node.js 20+ LTS
- PostgreSQL 15+ с PostGIS 3.3+
- Git

### Установка и настройка

1. **Клонирование репозитория**:
```bash
git clone https://github.com/username/sreda-market.git
cd sreda-market
```

2. **Установка зависимостей**:
```bash
npm install
```

3. **Настройка переменных окружения**:
```bash
cp .env.example .env
# Отредактируйте .env с вашими настройками
```

4. **Настройка базы данных**:
```bash
# Создание и миграция БД
npm run db:push

# Загрузка начальных данных (опционально)
npm run db:seed
```

5. **Запуск сервера разработки**:
```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5000`.

## Структура проекта

```
sreda-market/
├── client/                     # Frontend React приложение
│   ├── src/
│   │   ├── components/         # Переиспользуемые UI компоненты
│   │   │   ├── Map/           # Картографические компоненты
│   │   │   ├── Property/      # Компоненты недвижимости
│   │   │   ├── Analytics/     # Аналитические компоненты
│   │   │   └── ui/            # Базовые UI компоненты (shadcn)
│   │   ├── pages/             # Страничные компоненты
│   │   ├── services/          # API и внешние сервисы
│   │   ├── hooks/             # Пользовательские React хуки
│   │   ├── contexts/          # React контексты
│   │   └── lib/               # Утилиты и хелперы
├── server/                     # Backend Express приложение
│   ├── routes/                # API маршруты
│   ├── services/              # Бизнес-логика
│   │   ├── PropertyService.ts # Основной сервис недвижимости
│   │   ├── OptimizedPropertyService.ts # Оптимизированные запросы
│   │   ├── AnalyticsService.ts # Аналитические сервисы
│   │   └── GeospatialService.ts # Геопространственные операции
│   ├── middleware/            # Пользовательские middleware
│   ├── controllers/           # API контроллеры
│   └── config/                # Файлы конфигурации
├── shared/                     # Общие типы и схемы
│   ├── schema.ts              # Схемы базы данных (Drizzle)
│   └── types.ts               # TypeScript типы
├── docs/                       # Документация
├── scripts/                    # Скрипты развертывания и обслуживания
└── tests/                      # Тесты
```

## API Endpoints

### Основные маршруты
- `GET /api/properties` - Получение списка недвижимости
- `GET /api/properties/:id` - Детали объекта недвижимости
- `GET /api/analytics/market` - Рыночная аналитика
- `GET /api/regions` - Список регионов
- `POST /api/favorites` - Управление избранным

### Аналитические маршруты
- `GET /api/analytics/investment` - Инвестиционная аналитика
- `GET /api/analytics/trends` - Анализ трендов
- `GET /api/analytics/heatmap` - Данные для тепловых карт

Подробная документация API доступна в [API Documentation](docs/api.md).

## География покрытия

Платформа поддерживает следующие города России:
- **Москва** - Столичный регион
- **Санкт-Петербург** - Северная столица
- **Новосибирск** - Сибирский федеральный округ
- **Екатеринбург** - Уральский федеральный округ
- **Казань** - Приволжский федеральный округ
- **Уфа** - Республика Башкортостан
- **Красноярск** - Красноярский край
- **Пермь** - Пермский край
- **Калининград** - Калининградская область
- **Тюмень** - Тюменская область
- **Сочи** - Краснодарский край

## Безопасность

- **HTTPS везде**: Принудительное использование HTTPS
- **JWT токены**: Безопасная аутентификация пользователей
- **Rate limiting**: Защита от злоупотреблений API
- **Валидация данных**: Строгая валидация всех входящих данных
- **CORS настройки**: Правильно настроенные CORS политики
- **IP валидация**: Система предотвращения мошенничества

## Мониторинг и аналитика

- **Yandex Metrika**: Веб-аналитика пользователей
- **Error tracking**: Отслеживание ошибок в production
- **Performance monitoring**: Мониторинг производительности
- **Database monitoring**: Контроль состояния БД

## Развертывание

### Production развертывание
1. Настройте переменные окружения для production
2. Соберите frontend: `npm run build`
3. Запустите производственный сервер: `npm start`
4. Настройте reverse proxy (nginx/caddy)
5. Настройте SSL сертификаты

### Replit Deployment
Проект готов к развертыванию на Replit Deployments. Используйте кнопку Deploy в интерфейсе Replit.

## Тестирование

```bash
# Запуск всех тестов
npm test

# Тесты с покрытием
npm run test:coverage

# E2E тесты
npm run test:e2e
```

## Производительность

- **Lazy loading**: Компоненты загружаются по требованию
- **Image optimization**: Оптимизация изображений
- **Database indexing**: Индексы для быстрых запросов
- **Caching strategies**: Многоуровневое кэширование
- **Bundle optimization**: Оптимизация размера бандлов

## Участие в разработке

1. Форкните репозиторий
2. Создайте ветку для новой функции (`git checkout -b feature/amazing-feature`)
3. Зафиксируйте изменения (`git commit -m 'Add some amazing feature'`)
4. Отправьте в ветку (`git push origin feature/amazing-feature`)
5. Откройте Pull Request

## Changelog

См. [CHANGELOG.md](CHANGELOG.md) для списка изменений.

## Лицензия

Этот проект лицензирован под лицензией MIT - см. файл [LICENSE](LICENSE) для деталей.

## Поддержка

- Email: support@sredamarket.ru
- Telegram: @SredaMarketSupport
- Website: https://sredamarket.ru

---

Сделано с ❤️ командой SredaMarket